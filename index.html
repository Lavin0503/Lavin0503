<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cooldown Bypass</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        input, button {
            margin: 10px;
            padding: 10px;
            font-size: 1rem;
        }
        .backup-codes {
            margin: 20px;
            font-family: monospace;
            color: #007BFF;
        }
        #message {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Cooldown Bypass</h1>
    <p>Enter one of your backup codes to cancel the cooldown:</p>
    <input type="text" id="backup-code" placeholder="Enter backup code" required>
    <button onclick="validateBackupCode()">Submit</button>

    <div id="message"></div>

    <script>
        // Predefined backup codes
        const backupCodes = [
            "X9AB-12CD",
            "JK34-LM56",
            "QR78-TUV9",
            "WX01-YZ23",
            "45GH-67IJ",
            "89KL-MN01",
            "OP23-QT45",
            "UV67-WX89",
            "YZ01-AB23",
            "CD45-EF67"
        ];

        // Store the backup codes in localStorage if not already stored
        if (!localStorage.getItem("backupCodes")) {
            localStorage.setItem("backupCodes", JSON.stringify(backupCodes));
        }

        function validateBackupCode() {
            const codeInput = document.getElementById("backup-code").value.trim().toUpperCase();
            const messageDiv = document.getElementById("message");
            let storedCodes = JSON.parse(localStorage.getItem("backupCodes"));

            if (storedCodes.includes(codeInput)) {
                // Code is valid
                messageDiv.style.color = "green";
                messageDiv.innerText = "Backup code accepted! Cooldown has been canceled.";

                // Remove the used code from localStorage
                storedCodes = storedCodes.filter(code => code !== codeInput);
                localStorage.setItem("backupCodes", JSON.stringify(storedCodes));

                // Reset the cooldown (simulated here by removing cooldownEnd from localStorage)
                localStorage.removeItem("cooldownEnd");
            } else {
                // Code is invalid
                messageDiv.style.color = "red";
                messageDiv.innerText = "Invalid backup code. Please try again.";
            }
        }

        // Simulated cooldown system for demonstration
        if (!localStorage.getItem("cooldownEnd")) {
            // Set a cooldown end time 1 hour from now (for testing purposes)
            const cooldownEnd = Date.now() + 60 * 60 * 1000;
            localStorage.setItem("cooldownEnd", cooldownEnd);
        }

        // Countdown timer (displaying time left for cooldown)
        function updateCooldownTimer() {
            const cooldownEnd = parseInt(localStorage.getItem("cooldownEnd"), 10);
            const timeLeft = cooldownEnd - Date.now();

            if (timeLeft > 0) {
                const minutes = Math.floor(timeLeft / 60000);
                const seconds = Math.floor((timeLeft % 60000) / 1000);
                document.getElementById("message").style.color = "blue";
                document.getElementById("message").innerText = `Cooldown active. Time left: ${minutes}m ${seconds}s`;
                setTimeout(updateCooldownTimer, 1000);
            } else {
                document.getElementById("message").innerText = "No active cooldown.";
                localStorage.removeItem("cooldownEnd");
            }
        }

        updateCooldownTimer(); // Start the countdown on page load
    </script>
</body>
</html>
